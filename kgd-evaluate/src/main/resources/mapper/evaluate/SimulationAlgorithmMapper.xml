<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kgd.evaluate.mapper.SimulationAlgorithmMapper">

    <resultMap id="SimulationAlgorithmResult" type="com.kgd.evaluate.domain.SimulationAlgorithm">
        <id property="id" column="id"/>
        <result property="algorithmTitle" column="algorithm_title"/>
        <result property="algorithmCode" column="algorithm_code"/>
        <result property="algorithmType" column="algorithm_type"/>
        <result property="description" column="description"/>
        <result property="testCaseDesc" column="test_case_desc"/>
        <result property="indicatorMethod" column="indicator_method"/>
        <result property="formula" column="formula"/>
        <result property="targetValueDesc" column="target_value_desc"/>
        <result property="dataRequirements" column="data_requirements"/>
        <result property="status" column="status"/>
        <result property="sortOrder" column="sort_order"/>
        <result property="remark" column="remark"/>
        <result property="createBy" column="create_by"/>
        <result property="createTime" column="create_time"/>
        <result property="updateBy" column="update_by"/>
        <result property="updateTime" column="update_time"/>
    </resultMap>

    <sql id="Base_Column_List">
        id, algorithm_title, algorithm_code, algorithm_type, description, test_case_desc,
        indicator_method, formula, target_value_desc, data_requirements, status, sort_order,
        remark, create_by, create_time, update_by, update_time
    </sql>

    <select id="selectSimulationAlgorithmById" parameterType="long" resultMap="SimulationAlgorithmResult">
        SELECT <include refid="Base_Column_List"/>
        FROM simulation_algorithm
        WHERE id = #{id}
    </select>

    <select id="selectSimulationAlgorithmList" parameterType="com.kgd.evaluate.domain.SimulationAlgorithm"
            resultMap="SimulationAlgorithmResult">
        SELECT <include refid="Base_Column_List"/>
        FROM simulation_algorithm
        <where>
            <if test="algorithmTitle != null and algorithmTitle != ''">
                AND algorithm_title like concat('%', #{algorithmTitle}, '%')
            </if>
            <if test="algorithmCode != null and algorithmCode != ''">
                AND algorithm_code like concat('%', #{algorithmCode}, '%')
            </if>
            <if test="status != null and status != ''">
                AND status = #{status}
            </if>
        </where>
        ORDER BY sort_order ASC, id DESC
    </select>

    <insert id="insertSimulationAlgorithm" parameterType="com.kgd.evaluate.domain.SimulationAlgorithm"
            useGeneratedKeys="true" keyProperty="id">
        INSERT INTO simulation_algorithm (
            algorithm_title, algorithm_code, algorithm_type, description, test_case_desc,
            indicator_method, formula, target_value_desc, data_requirements, status, sort_order,
            remark, create_by, create_time, update_by, update_time
        ) VALUES (
            #{algorithmTitle}, #{algorithmCode}, #{algorithmType}, #{description}, #{testCaseDesc},
            #{indicatorMethod}, #{formula}, #{targetValueDesc}, #{dataRequirements}, #{status},
            #{sortOrder}, #{remark}, #{createBy}, #{createTime}, #{updateBy}, #{updateTime}
        )
    </insert>

    <update id="updateSimulationAlgorithm" parameterType="com.kgd.evaluate.domain.SimulationAlgorithm">
        UPDATE simulation_algorithm
        <set>
            <if test="algorithmTitle != null">algorithm_title = #{algorithmTitle},</if>
            <if test="algorithmCode != null">algorithm_code = #{algorithmCode},</if>
            <if test="algorithmType != null">algorithm_type = #{algorithmType},</if>
            <if test="description != null">description = #{description},</if>
            <if test="testCaseDesc != null">test_case_desc = #{testCaseDesc},</if>
            <if test="indicatorMethod != null">indicator_method = #{indicatorMethod},</if>
            <if test="formula != null">formula = #{formula},</if>
            <if test="targetValueDesc != null">target_value_desc = #{targetValueDesc},</if>
            <if test="dataRequirements != null">data_requirements = #{dataRequirements},</if>
            <if test="status != null">status = #{status},</if>
            <if test="sortOrder != null">sort_order = #{sortOrder},</if>
            <if test="remark != null">remark = #{remark},</if>
            <if test="updateBy != null">update_by = #{updateBy},</if>
            <if test="updateTime != null">update_time = #{updateTime},</if>
        </set>
        WHERE id = #{id}
    </update>

    <delete id="deleteSimulationAlgorithmById" parameterType="long">
        DELETE FROM simulation_algorithm WHERE id = #{id}
    </delete>

    <delete id="deleteSimulationAlgorithmByIds" parameterType="long">
        DELETE FROM simulation_algorithm WHERE id IN
        <foreach collection="array" item="id" open="(" separator="," close=")">
            #{id}
        </foreach>
    </delete>
</mapper>

